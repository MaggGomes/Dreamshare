<!DOCTYPE html>
<html lang="en">

  <head>
    <% include ../../partials/head %>
  </head>

  <body>
        <% include ../../partials/header %>

    <!-- Page Content -->
    <div class="container">

          <!-- Jumbotron Header -->
          <header class="jumbotron my-4 py-3">
            <h1 class="display-3">DreamShare</h1>
          </header>
      <!-- Page Features -->
      <div class="row text-center">
      <div  class="col-sm-12">
        <h3> Campanhas </h3>
      </div>
      <div class="text-right dropdown col-sm-12 mb-4">
        <span>Ordenar por:</span>
        <button class="btn btn-secondary dropdown-toggle more-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
        Mais contribuidores
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#">Mais recentes</a>
          <a class="dropdown-item" href="#">Mais contribuidores</a>
          <a class="dropdown-item" href="#">Fundraising</a>
          <a class="dropdown-item" href="#">Bens</a>
        </div>
      </div>

    <% campaigns.forEach(function(campaign) { %>
        <div class="col-lg-4 col-md-4 mb-4">
          <div class="card">
            <img class="card-img-top campaign_img" src="<%= campaign.image %>" alt="">
            <div class="card-body">
              <h4 class="card-title"><a href="campaigns/<%= campaign._id %>"><%= campaign.title %></a></h4>
              <p class="card-text"><%= campaign.description %></p>
            </div>
            <div class="card-footer">
              <p class="card-text">Vai ter Localização aqui.</p>
          </div>
          </div>
          <input type="hidden" class="id_campaign" value="<%= campaign._id%>">
      </div>
    <% }); %>
        <div  class="col-sm-12 mb-4">
          <button id="more_campaigns" class="btn btn-secondary float-right">Ver Mais</button>
        </div>

         </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

   <% include ../../partials/footer %>

  <script>
      $('#more_campaigns').click(function () {

          existingCampaigns = [];

          $('.id_campaign').each(function () {
              existingCampaigns.push($(this).val());
              //console.log($(this).val());
          });

          $.post("/campaigns/more", {
              existingCampaigns: existingCampaigns,
              nCampaigns : 6
          }, function (result) {
              console.log(result);
              if (result === '200')

          });
      });
  </script>
  </body>

</html>
